<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
  <script type="text/javascript" th:src="@{/js/dx.all.js}"></script>
  <script type="text/javascript" th:src="@{/js/leeni_dxchart.js}"></script>
  <script type="text/javascript" th:src="@{/js/leeni_dxdatagrid.js}"></script>
  <script type="text/javascript" th:src="@{/js/leeni_dxCircularGauge.js}"></script>
  <script type="text/javascript" th:src="@{/js/leeni_dxPieChart.js}"></script>
  <script type="text/javascript" th:src="@{/js/home.js}"></script>

<script type="text/javascript" th:src="@{/js/data.js}"></script>
  <link th:href="@{/css/dx.light.css}" rel="stylesheet" >
  <link th:href="@{/css/home.css}" rel="stylesheet">
  <meta charset="UTF-8">
  <title>Title</title>
<style>
	.alarmTabDiv{
		margin: 2.5%;
		border-bottom: 1px solid darkgray;
	}
	.alarmTabButton{
		width: 100px;
		height: 40px;
		display: inline-block;
		text-align: center;
		font-size: 20px;
		background-color: rgb(68, 84, 106);
		color: white;
	}.alarmTabButtonSelect{
		background-color: midnightblue;
	}
	.mainContainer{
		width: 90%;
	}
	.serverBox{
		margin:2.5%;
		width:95%;
		overflow:auto;
	}
	.serverBox table{
		border: 1px solid;
		border-collapse: collapse;
		text-align: center;
	}
	.serverBox td:not(.serverName){
		border: 1px solid;
		height: 35px;
		align-items:center;

	}
	.serverContent{
		width: 105px;
	}
	.serverName{
		border: 1px solid black;
		background-color: rgb(68, 84, 106);
		color: rgb(182, 245, 255);
	}
	.serverId{
		background-color: rgb(223, 240, 255);
	}
</style>
<script th:inline="javascript">
	const machine = {"conbox": conbox, "acb": acb, "vcb": vcb, "inv": inv, "tr": tr};
	const num = 0;
	function alarmStaTable(mList){
		const conboxTd = ("#conboxTd");
		let conboxTdResult = "";
	}
  window.onload = function (){
	  test(machine);
  }
  
function cycleTable(paraList, maxCount){
	let resultInner = "";
	for(var i = 0; i < maxCount; i++){
		if(i < paraList.length){
			resultInner += '<td class="serverId"><div class="serverContent">#' + paraList[i].ID + '</div></td>';
		}else{
			resultInner += '<td class="serverId"><div class="serverContent"></div></td>';
		}
	}
	resultInner += "</tr><tr>";
	for(var i = 0; i < maxCount; i++){
		if(i < paraList.length){
			resultInner += '<td><div class="serverContent">' + paraList[i].description + '</div></td>';
		}else{
			resultInner += '<td><div class="serverContent"></div></td>';
		}
	}
	resultInner += "</tr><tr>";
	for(var i = 0; i < maxCount; i++){
		if(i < paraList.length){
			resultInner += '<td><div class="serverContent">' + paraList[i].surver + '</div></td>';
		}else{
			resultInner += '<td><div class="serverContent"></div></td>';
		}
	}
	return resultInner;
 }
function test(listMap){

	const alarmStaTable = $("#alarmStaTable")[0];
	const conboxList = listMap.conbox;
	const acbList = listMap.acb;
	const vcbList = listMap.vcb;
	const invList = listMap.inv;
	const trList = listMap.tr;
	// 5개의 리스트중 가장 많은 정보의 수
	let maxCount = Math.max(conboxList.length, acbList.length, vcbList.length, invList.length, trList.length);
	let conboxBox = "<tr>";
	conboxBox += '<td class="serverName" rowspan="3"><div class="serverContent">접속함</div></td>';
	conboxBox += cycleTable(conboxList, maxCount);
	conboxBox += "</tr>";
	alarmStaTable.innerHTML = conboxBox;
	let acbBox = "<tr>";
	acbBox += '<td class="serverName" rowspan="3"><div class="serverContent">계전기</div></td>';
	acbBox += cycleTable(acbList, maxCount);
	acbBox += "</tr>";
	alarmStaTable.innerHTML += acbBox;
	let vcbBox = "<tr>";
	vcbBox += '<td class="serverName" rowspan="3"><div class="serverContent">계전기</div></td>';
	vcbBox += cycleTable(vcbList, maxCount);
	vcbBox += "</tr>";
	alarmStaTable.innerHTML += vcbBox;
	let invBox = "<tr>";
	invBox += '<td class="serverName" rowspan="3"><div class="serverContent">인버터</div></td>';
	invBox += cycleTable(invList, maxCount);
	invBox += "</tr>";
	alarmStaTable.innerHTML += invBox;
	let trBox = "<tr>";
	trBox += '<td class="serverName" rowspan="3"><div class="serverContent">TR온도계</div></td>';
	trBox += cycleTable(trList, maxCount);
	trBox += "</tr>";
	alarmStaTable.innerHTML += trBox;
}

</script>
</head>
<body>
<div class="container">

	<div id="contents_wrap">
		<div class="cont_header">
			<h1 class="page_title">
				<img src="../images/menu_icon07.png" alt="">
				<span>통신상태</span>
			</h1>
			<p class="page_navi">
				<span>태양광 모니터링</span>&gt;<span>알람</span>&gt;<span class="bold_color">통신상태</span>
			</p>
		</div> <!-- cont_headerEnd -->
		<div class="cont_main PT20">
			<div class="oneTable_wrap">
				<!-- 컨텐츠영역 시작 -->
				<div class="mainContainer">
					<div class="serverBox">
						<table id="alarmStaTable">
							<tr>
								<td class="serverName" rowspan="3">
									<div class="serverContent">
										접속함
									</div>
								</td>
								<td id="conboxTd">
									<div  class="serverContent"></div>

								</td>
							</tr>
							<tr>
								<td>
									<div class="serverContent">

									</div>
								</td>
								<td>
									<div class="serverContent">

									</div>
								</td>
								<td>
									<div class="serverContent">

									</div>
								</td>
								<td>
									<div class="serverContent">

									</div>
								</td>
							</tr>
							<tr>
								<td>
									<div class="serverContent">

									</div>
								</td>
								<td>
									<div class="serverContent">

									</div>
								</td>
								<td>
									<div  class="serverContent">

									</div>
								</td>
								<td>
									<div  class="serverContent">

									</div>
								</td>
							</tr>
						</table>
					</div>
				</div>

			</div> <!-- table_wrapEnd -->
		</div> <!-- cont_mainEnd -->
	</div> <!-- contents_wrapEnd -->



</body>
</html>