<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
  <script type="text/javascript" th:src="@{/js/dx.all.js}"></script>
  <script type="text/javascript" th:src="@{/js/leeni_dxchart.js}"></script>
  <script type="text/javascript" th:src="@{/js/leeni_dxdatagrid.js}"></script>
  <script type="text/javascript" th:src="@{/js/leeni_dxCircularGauge.js}"></script>
  <script type="text/javascript" th:src="@{/js/leeni_dxPieChart.js}"></script>
  <script type="text/javascript" th:src="@{/js/home.js}"></script>

<script type="text/javascript" th:src="@{/js/data.js}"></script>
  <link th:href="@{/css/dx.light.css}" rel="stylesheet" >
  <link th:href="@{/css/home.css}" rel="stylesheet">
  <meta charset="UTF-8">
  <title>Title</title>
<style>
	.alarmTabDiv{
		margin: 2.5%;
		border-bottom: 1px solid darkgray;
	}
	.alarmTabButton{
		width: 100px;
		height: 40px;
		display: inline-block;
		text-align: center;
		font-size: 20px;
		background-color: rgb(68, 84, 106);
		color: white;
	}.alarmTabButtonSelect{
		background-color: midnightblue;
	}
	.mainContainer{
		width: 90%;
	}
	.serverBox{
		margin:2.5%;
		width:95%;
		overflow:auto;
	}
	.serverBox table{
		border: 1px solid;
		border-collapse: collapse;
		text-align: center;
	}
	.serverBox td:not(.serverName){
		border: 1px solid;
		height: 35px;
		align-items:center;

	}
	.serverContent{
		width: 105px;
	}
	.serverName{
		border: 1px solid black;
		background-color: rgb(68, 84, 106);
		color: rgb(182, 245, 255);
	}
	.serverId{
		background-color: rgb(223, 240, 255);
	}
</style>
<script th:inline="javascript">
	const machine = {"conbox": conbox, "acb": acb, "vcb": vcb, "inv": inv, "tr": tr};
	const num = 0;
	function alarmStaTable(mList){
		const conboxTd = ("#conboxTd");
		let conboxTdResult = "";
	}
  window.onload = function (){
	  test(machine);
  }
  
function cycleTable(paraList, maxCount){
	let resultInner = "";
	for(var i = 0; i < maxCount; i++){
		if(i < paraList.length){
			resultInner += '<td class="serverId"><div class="serverContent">#' + paraList[i].ID + '</div></td>';
		}else{
			resultInner += '<td class="serverId"><div class="serverContent"></div></td>';
		}
	}
	resultInner += "</tr><tr>";
	for(var i = 0; i < maxCount; i++){
		if(i < paraList.length){
			resultInner += '<td><div class="serverContent">' + paraList[i].description + '</div></td>';
		}else{
			resultInner += '<td><div class="serverContent"></div></td>';
		}
	}
	resultInner += "</tr><tr>";
	for(var i = 0; i < maxCount; i++){
		if(i < paraList.length){
			resultInner += '<td><div class="serverContent">' + paraList[i].surver + '</div></td>';
		}else{
			resultInner += '<td><div class="serverContent"></div></td>';
		}
	}
	return resultInner;
 }
function test(listMap){

	const alarmStaTable = $("#alarmStaTable")[0];
	const conboxList = listMap.conbox;
	const acbList = listMap.acb;
	const vcbList = listMap.vcb;
	const invList = listMap.inv;
	const trList = listMap.tr;
	// 5개의 리스트중 가장 많은 정보의 수
	let maxCount = Math.max(conboxList.length, acbList.length, vcbList.length, invList.length, trList.length);
	let conboxBox = "<tr>";
	conboxBox += '<td class="serverName" rowspan="3"><div class="serverContent">접속함</div></td>';
	conboxBox += cycleTable(conboxList, maxCount);
	conboxBox += "</tr>";
	alarmStaTable.innerHTML = conboxBox;
	let acbBox = "<tr>";
	acbBox += '<td class="serverName" rowspan="3"><div class="serverContent">계전기</div></td>';
	acbBox += cycleTable(acbList, maxCount);
	acbBox += "</tr>";
	alarmStaTable.innerHTML += acbBox;
	let vcbBox = "<tr>";
	vcbBox += '<td class="serverName" rowspan="3"><div class="serverContent">계전기</div></td>';
	vcbBox += cycleTable(vcbList, maxCount);
	vcbBox += "</tr>";
	alarmStaTable.innerHTML += vcbBox;
	let invBox = "<tr>";
	invBox += '<td class="serverName" rowspan="3"><div class="serverContent">인버터</div></td>';
	invBox += cycleTable(invList, maxCount);
	invBox += "</tr>";
	alarmStaTable.innerHTML += invBox;
	let trBox = "<tr>";
	trBox += '<td class="serverName" rowspan="3"><div class="serverContent">TR온도계</div></td>';
	trBox += cycleTable(trList, maxCount);
	trBox += "</tr>";
	alarmStaTable.innerHTML += trBox;
}

</script>
</head>
<body>
<div class="container">
  <div style="background: #E6E6E6; height: 50px; display: flex; flex-direction: row; justify-content: space-between;">
    <div><h1><a href="http://localhost:8080/">ECO Platform</a></h1></div>
    <div style="display: flex; align-items: center;">
      <div>2023.02.09 15:07 맑음 -2도 사업그룹/현장명</div>
      <select>
        <option value="">1태양광발전소</option>
        <option value="">2태양광발전소</option>
        <option value="">3태양광발전소</option>
      </select>
      <div>사용자명</div>
    </div>
  </div>

  <div style="display: flex;">
    <div style="background: #E6E6E6; width: 10%; height: 1600px;">
      <div>
        <h1 style="padding: 20px 20px; color: black;">xEMS</h1>
        <ul>
          <li class="make-li"><button type="button" th:text="대시보드" th:onclick="|location.href='@{http://localhost:8080/}'|"></button></li>
          <li class="make-li"><button type="button" th:text="계통도" th:onclick="|location.href='@{http://localhost:8080/familyTree}'|"></button></li>
          <li class="make-li"><button type="button" th:text="인버터" th:onclick="|location.href='@{http://localhost:8080/invert}'|"></button></li>
          <li class="make-li"><button type="button" th:text="접속함" th:onclick="|location.href='@{http://localhost:8080/chStatus}'|"></button></li>
          <li class="make-li"><button type="button" th:text="트랜드" th:onclick="|location.href='@{http://localhost:8080/trend}'|"></button></li>
          <li class="make-li"><button type="button" th:text="보고서" th:onclick="|location.href='@{http://localhost:8080/report}'|"></button></li>
          <li class="make-li"><button type="button" th:text="알람" th:onclick="|location.href='@{http://localhost:8080/alarm}'|"></button></li>
          <li class="make-li"><button type="button" th:text="설정" th:onclick="|location.href='@{http://localhost:8080/setting}'|"></button></li>
          <li class="make-li"><button type="button" th:text="고객센터" th:onclick="|location.href='@{http://localhost:8080/csCenter}'|"></button></li>
        </ul>
      </div>
      <div style="margin-top: 500px;">
        <div>발전용량</div>
        <div>999.75 KWp</div>
        <div>금일발전량</div>
        <div>20968.0 KWp</div>
      </div>
    </div>

    <!-- 컨텐츠영역 시작 -->
    <div class="mainContainer">
    <div class="alarmTabDiv"> <!-- 교체 탭 -->
		<div class="alarmTabButton" th:onclick="|location.href='@{http://localhost:8080/alarm}'|">알람현황</div>
		<div class="alarmTabButton" th:onclick="|location.href='@{http://localhost:8080/alarm2}'|">알람분석</div>
		<div class="alarmTabButton alarmTabButtonSelect">통신상태</div>
	</div>
	<div class="serverBox">
		<table id="alarmStaTable">
			<tr>
				<td class="serverName" rowspan="3">
					<div class="serverContent">
						접속함
					</div>
				</td>
				<td id="conboxTd">
					<div  class="serverContent"></div>
						
				</td>
			</tr>
			<tr>
				<td>
					<div class="serverContent">
						
					</div>
				</td>
				<td>
					<div class="serverContent">
						
					</div>
				</td>
				<td>
					<div class="serverContent">
						
					</div>
				</td>
				<td>
					<div class="serverContent">
						
					</div>
				</td>
			</tr>
			<tr>
				<td>
					<div class="serverContent">
						
					</div>
				</td>
				<td>
					<div class="serverContent">
						
					</div>
				</td>
				<td>
					<div  class="serverContent">
						
					</div>
				</td>
				<td>
					<div  class="serverContent"> 
						
					</div>
				</td>
			</tr>
		</table>
	</div>
	</div>


</body>
</html>